<!DOCTYPE html>
<html ng-app="main">
<head lang="en">
	<meta charset="UTF-8">
	<title>Shrödinger's Black Box</title>

	<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
	<!--
	<link rel="stylesheet" href="css/animate.css">
-->
	<link rel="stylesheet" href="/css/hover.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="stylesheet" href="/css/signin.css">
	<link rel="stylesheet" href="/css/signup.css">
	<link rel="stylesheet" href="font-awesome-4.2.0/css/font-awesome.css">

	<script type="text/javascript" src="/jquery/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="/angular-1.3.8/angular.js"></script>
	<script type="text/javascript" src="/node_modules/angular-ui-router/release/angular-ui-router.js"></script>
	<script type='text/javascript' src="/js/main.js"></script>
	<script type='text/javascript' src="/js/signin.js"></script>
	<script type='text/javascript' src="/js/signup.js"></script>
	<script type='text/javascript' src="/js/facebook.js"></script>

	<!-- quick tooltip modification script
	later put this in its own file
-->
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
  	<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
	 <script>
	  $(function() {
	    $( document ).tooltip({
	    	show: {
			    delay: 1000
			  },
	      	position: {
		        my: "center bottom-20",
		        at: "center top",
		        using: function( position, feedback ) {
		          $( this ).css( position );
		          $( "<div>" )
		            .addClass( "arrow" )
		            .addClass( feedback.vertical )
		            .addClass( feedback.horizontal )
		            .appendTo( this );
		        }
	      	}
		});
	  });
	  </script>

</head>

<body class="background-dark-slate">
	<div ng-controller="MainController as mainCtrl">
		<a class="no-text-sel" href="#"><img src="img/ico/logo.png" style="width:64px;height:64px; float: left;"></a>
		<b class="no-text-sel default-cursor" style="margin-left: 5px; margin-top:25px; color:black; float: left">Shrödinger's Black Box</b>
		<!-- hacky php way to detect desktop, mobile, or tablet usage
		since mobile and tablets don't support hover, we use this information to provide
		a click-based login button instead
		-->
		
		<!--
		<div ui-view></div>
		<a ui-sref="state1">State 1</a>
		<a ui-sref="state2">State 2</a>
	-->

		<!-- only show login options if we are not currently logged in-->
		<div ng-show="!loggedIn">
			<nav class="btn-group pull-right" style="margin-top:5px; margin-right:5px">
			    <ul class="cf">
			        <li id="loginContainer"><a id="loginBtn" class="btn btn-success custom-fade custom-btn-wide custom-text-space-med dropdown" href="#">Login
			        	<span id="caretSign" class="caret"></span></a>
			            <ul id="dropdownMenu">
			                <li>
			                	<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
								</fb:login-button>
			                </li>
			                <li><a class="no-text-dec" id="signupLocallyButton" href="#" data-toggle="modal" data-target="#signupModal">Create Account</a></li>
			                <li><a class="no-text-dec" id="loginLocallyButton" href="#" data-toggle="modal" data-target="#loginModal">Login Locally</a></li>
			            </ul>
			        </li>
			    </ul>
			</nav>
		</div>

		<div id="loginModal" class="modal fade">
			<div id="loginDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Login</h4>
					</div>
					<div id="signInBody" class="modal-body">
				      	<signin-viewer></signin-viewer>
					</div>
				</div>
			</div>
		</div>

		<div id="signupModal" class="modal fade">
			<div id="signupDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Signup</h4>
					</div>
					<div id="signupBody" class="modal-body">
				      	<signup-viewer></signup-viewer>
					</div>
				</div>
			</div>
		</div>


		<!-- show navigation bar if we are logged in -->
		<div ng-show="loggedIn">
			<nav class="pull-right" style="margin-top:5px; margin-right:5px;">
		    	<div> Welcome, {{userObject.local.email}}! </div>
		    	<a href="#" style="background: transparent; display: inline; padding:0px 0px"> <i class="fa fa-cog fa-2x" href="#"></i> </a>
		        <button id="loginBtn" class="btn btn-success custom-fade custom-btn-wide custom-text-space-med" href="#" ng-click="logout()">Logout
			</nav>
		</div>

		<div id="buttonGroup" class="text-center">
			<button id="createBtn" class="custom-btn custom-btn-large custom-btn-transparent custom-tooltip custom-border-fade custom-text-space-med" type="button" title="Start a new box!" data-toggle="modal" data-target="#createBoxModal">CREATE</button>
			<div class="space-divider"/>
			<button id="receiveBtn" class="custom-btn custom-btn-large custom-btn-transparent custom-border-fade custom-text-space-med" type="button" title="Receive a random box!" data-toggle="modal" data-target="#receiveBoxModal">RECEIVE</button>
		</div>
		<div id="createBoxModal" class="modal fade">
			<div id="createDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Create a box</h4>
					</div>
					<div class="modal-body">
						<form class="form-create">
				        	<label for="inputEmail" class="sr-only">Box Name</label>
				        	<input type="text" id="inputEmail" class="form-control" ng-model="createBoxName" placeholder="Enter the name of the box" required="" autofocus="">
				        	<label></label>
				        	<button class="btn btn-lg btn-primary btn-block" type="submit">Create box</button>
				      	</form>
					</div>
				</div>
			</div>
		</div>
			<!--
			<h1>{{mainCtrl.greeting}}</h1>
			<input type="text" ng-model="mainCtrl.greeting">
			-->
	</div>
</body>
<footer class="no-text-sel default-cursor" style="position:absolute; bottom:0; right:3px; width:100%; height:40px; text-align: right;">
  Copyright © 2015<br>
  6.470 Project by Team .hack (wgwong@mit.edu, davidwu@mit.edu, rrrahman@mit.edu)
</footer>
</html>