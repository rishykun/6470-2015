<!DOCTYPE html>
<html ng-app="main">
<head lang="en">
	<meta charset="UTF-8">
	<title>Shrödinger's Black Box</title>

	<!-- stylesheets -->
	<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
	<link rel="stylesheet" href="/css/hover.css">
	<link rel="stylesheet" href="/css/animate.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="stylesheet" href="/css/signin.css">
	<link rel="stylesheet" href="/css/signup.css">
	<link rel="stylesheet" href="/css/rishad.css">
	<link rel="stylesheet" href="/font-awesome-4.2.0/css/font-awesome.css">

	<!-- external javascript -->
	<script type="text/javascript" src="/jquery/jquery-2.1.3.min.js"></script>
	<script type="text/javascript" src="/bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="/angular-1.3.8/angular.js"></script>
	<script type="text/javascript" src="/angular-ui-router/release/angular-ui-router.js"></script>
	<script type='text/javascript' src="/facebook-api/facebook.js"></script>
	<script type='text/javascript' src="/bootstrap-growl/bootstrap-growl.js"></script>

	<!-- internal source javascript -->
	<script type='text/javascript' src="/js/main.js"></script>
	<script type='text/javascript' src="/js/signin.js"></script>
	<script type='text/javascript' src="/js/signup.js"></script>
	<script type='text/javascript' src="/js/create.js"></script>
	<script type='text/javascript' src="/js/profile.js"></script>
	<script type='text/javascript' src="/js/gallery.js"></script>

	<!-- custom tooltip -->
	<link rel="stylesheet" href="/jquery/jquery-ui.css">
  	<script type='text/javascript' src="/jquery/jquery-ui.js"></script>
	<script type='text/javascript' src="/js/tooltip.js"></script>
</head>

<body class="background-dark-slate">
	<div ng-controller="MainController as mainCtrl">
		<a class="no-text-sel" href="/"><img class="icon-med" src="img/ico/logo.png" style="float: left;"></a>
		<b class="no-text-sel default-cursor" style="margin-left: 5px; margin-top:25px; color:black; float: left">Shrödinger's Black Box</b>

		<!-- only show login options if we are not currently logged in-->
		<div ng-show="!loggedIn">
			<nav class="btn-group pull-right" style="margin-top:5px; margin-right:5px">
			    <ul class="cf">
			        <li id="loginContainer"><a id="loginBtn" class="btn btn-success custom-fade custom-btn-wide custom-text-space-med dropdown" href="#">Login
			        	<span id="caretSign" class="caret"></span></a>
			            <ul id="dropdownMenu">
			                <li>
			                	<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
								</fb:login-button>
			                </li>
			                <li><a class="no-text-dec" id="signupButton" data-toggle="modal" data-target="#signModal" ui-sref="signup">Create Account</a></li>
			                <li><a class="no-text-dec" id="loginButton" data-toggle="modal" data-target="#signModal" ui-sref="signin">Login Locally</a></li>
			            </ul>
			        </li>
			    </ul>
			</nav>
		</div>

		<div id="signModal" class="modal fade font-gray">
			<div id="signDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">{{signModalTitle}}</h4>
					</div>
					<div id="signBody" class="modal-body">
						<div ui-view></div>
					</div>
				</div>
			</div>
		</div>

		<!-- show navigation bar if we are logged in -->
		<div ng-show="loggedIn">
			<nav class="pull-right font-white" style="margin-top:5px; margin-right:5px;">
		    	<div style="float: left; padding-top:5px; padding-right:10px"> Welcome, {{userObject.local.email}}! </div>
		    	<div style="float: right">
		    		<div style="float:left; padding-right: 10px; padding-top: 5px">
				    	<a class="font-white no-text-dec no-text-sel custom-underline-from-center" ui-sref="profileview" style="background: transparent; display: inline; padding: 0px 0px; padding-bottom: 5px" href="#/">Profile</a>
				    	<a class="font-white no-text-dec no-text-sel custom-underline-from-center" ui-sref="settings" style="background: transparent; display: inline; padding: 0px 0px; padding-bottom: 5px" href="#/">Settings</a>
			    	</div>
			        <button id="loginBtn" class="btn btn-success custom-fade custom-btn-wide custom-text-space-med" href="#" ng-click="logout()">Logout
		        </div>
			</nav>
		</div>

		<div id="buttonGroup" class="text-center">
			<button id="createBtn" class="custom-btn custom-btn-large custom-btn-transparent custom-tooltip custom-border-fade custom-text-space-med" type="button" title="Start a new box!" data-toggle="modal" data-target="#createBoxModal">CREATE</button>
			<div class="space-divider"/>
			<button id="receiveBtn" class="custom-btn custom-btn-large custom-btn-transparent custom-border-fade custom-text-space-med" type="button" title="Receive a random box!" data-toggle="modal" ui-sref="upload" data-target="#uploadBoxModal">RECEIVE</button>
		</div>

		<div id="createBoxModal" class="modal fade font-gray" ng-controller="createController">
			<div id="createDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Create a box</h4>
					</div>
					<div class="modal-body">
						<form class="form-create">
				        	<label for="inputEmail" class="sr-only">Box Name</label>
				        	<input type="text" id="inputEmail" class="form-control" ng-model="formData.boxname" placeholder="Enter the name of the box" required="" autofocus="">
				        	<label></label>
				        	<button class="btn btn-lg btn-primary btn-block" type="submit" ng-disabled="!isLoggedIn()" ng-click="createBox()">Create box</button>
				      	</form>
					</div>
				</div>
			</div>
		</div>

		<!-- debug -->
		<div id="uploadBoxModal" class="modal fade font-gray" ng-controller="createController">
			<div id="createDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Upload</h4>
					</div>
					<div class="modal-body" style="padding: 0px">
						<div ui-view></div>
					</div>
				</div>
			</div>
		</div>

		<!-- debug -->
		<div id="receiveBoxModal" class="modal fade font-gray" ng-controller="createController">
			<div id="createDialog" class="modal-dialog custom-modal-compress">
				<div class="modal-content custom-modal-rounded">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
       					<h4 class="modal-title no-text-sel default-cursor">Box insertname</h4>
					</div>
					<div class="modal-body">
			        	<button class="btn btn-lg btn-primary btn-block" type="submit" ng-click="getBox()">Get box</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<footer class="no-text-sel default-cursor" style="position:absolute; bottom:0; right:3px; width:100%; height:40px; text-align: right;">
  Copyright © 2015<br>
  6.470 Project by Team .hack (wgwong@mit.edu, davidwu@mit.edu, rrrahman@mit.edu)
</footer>
</html>